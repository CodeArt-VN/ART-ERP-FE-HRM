<ion-header>
  <app-toolbar [page]="this">
    <ion-button
      title="{{'Allow to use account' | translate}}"
      [color]="userAccount.LockoutEnabled ? 'danger': 'success'"
      [disabled]="showLogout"
      *ngIf="userAccount.Id"
      (click)="changeLock()"
    >
      <ion-icon slot="icon-only" [name]="userAccount.LockoutEnabled ? 'lock-closed' : 'lock-open'"></ion-icon>
    </ion-button>
    <ion-button
      title="{{'Assign system admin role' | translate}}"
      color="danger"
      [disabled]="showLogout"
      *ngIf="showRolesEdit && userAccount.Id"
      [fill]="!checkRole('HOST')? 'outline' : 'solid'"
      (click)="changeRole('HOST')"
    >
      <ion-icon slot="icon-only" name="star"></ion-icon>
    </ion-button>
  </app-toolbar>
</ion-header>

<ion-content appScrollbarTheme class="left" [ngClass]="{withFeature: pageConfig.isShowFeature}" forceOverscroll="false">
  <ion-fab
    [ngClass]="{withSearch: pageConfig.isShowSearch,'ion-hide-md-down': pageConfig.isSubActive}"
    class="feature no-print"
    vertical="bottom"
    horizontal="start"
    slot="fixed"
  >
    <app-page-message [itemsLength]="item?1:0" [showSpinner]="pageConfig.showSpinner"></app-page-message>
    <div *ngIf="pageConfig.showSpinner==false">
      <ion-list lines="full">
        <ion-item class="img-holder">
          <div
            style="margin: 0 auto"
            ng2FileDrop
            class="avatar well my-drop-zone ion-padding"
            [ngClass]="{'nv-file-over': hasBaseDropZoneOver}"
            (fileOver)="fileOverBase($event)"
            (onFileDrop)="onFileSelected()"
            [uploader]="uploader"
          >
            <img class="ion-margin" [src]="avatarURL" (error)="img.src = 'assets/avartar-empty.jpg'" #img />
            <div>
              <ion-button class="change-avatar" *ngIf="item.IsDisabled" color="danger" size="small">
                {{'Resigned/ on pause' | translate}}
              </ion-button>
            </div>
            <input
              style="display: none"
              #importfile
              type="file"
              (change)="onFileSelected()"
              ng2FileSelect
              accept="image/*"
              [uploader]="uploader"
            />

            <ion-label>
              <h1 class="bold">{{formGroup.get('FullName').value}}</h1>
              <ng-container *ngFor="let t of jobTitleList">
                <h2 *ngIf="formGroup.controls.IDJobTitle == t.Id" color="medium text-center">{{ t.Name }}</h2>
                <p *ngIf="formGroup.get('IsDisabled').value" color="danger">
                  {{ 'Resigned staff' | translate}}
                </p>
                
              </ng-container>
            </ion-label>
            <div class="c-control">
            <!-- <app-input-control
            [field]="{
              id: 'IDBranch',
              type: 'branch-breadcrumbs',
              label: 'Branch',
              form: formGroup,
              dataSource: env.branchList
            }"
          ></app-input-control> -->
            <app-branch-breadcrumbs
              [maxItems]="1"
              [itemsBeforeCollapse]="0"
              [itemsAfterCollapse]="1"
              [Id]="formGroup.get('IDJobTitle').value"
              [Items]="env.jobTitleList"
              [ngClass]="{'no-check-dirty': noCheckDirty}"
              class="c-input disable breadcrumbs"
              *ngIf="formGroup.get('IDJobTitle').value"
            ></app-branch-breadcrumbs>
        </div>
          </div>
        </ion-item>
        <ion-item>
          <ion-list lines="none">
            <!-- <ion-item lines="none" *ngIf="formGroup.get('Company').value">
              <ion-icon slot="start" name="business-outline"></ion-icon>
                <ion-label><h3>{{ formGroup.get('Company').value.Name }}</h3></ion-label>
            </ion-item> -->
            <ion-item lines="none" *ngIf="formGroup.get('Code').value">
              <ion-icon slot="start" name="qr-code-outline"></ion-icon>
              <ion-label><h3>{{ formGroup.get('Code').value }}</h3></ion-label>
            </ion-item>

            <ion-item lines="none" *ngIf="formGroup.get('Email').value">
              <ion-icon slot="start" name="mail-outline"></ion-icon>
              <ion-label><h3>{{formGroup.get('Email').value }}</h3></ion-label>
            </ion-item>

            <ion-item lines="none" *ngIf="formGroup.get('PhoneNumber').value">
              <ion-icon slot="start" name="call-outline"></ion-icon>
              <ion-label><h3>{{formGroup.get('PhoneNumber').value}}</h3></ion-label>
            </ion-item>
          </ion-list>
        </ion-item>
        <ng-container *ngFor="let i of optionGroup">
          <ion-item
            [color]="segmentView.Page == i.Code? 'primary': '' "
            button
            detail="true"
            lines="full"
            class="clickable"
            (click)="loadNode(i)"
          >
          <ion-icon slot="start" aria-hidden="true" [name]="i.Icon"></ion-icon>
            <ion-label class="ion-text-wrap">
              <h3>{{i.Name | translate}}</h3>
              <p>
                {{i.Remark | translate}}
              </p>
            </ion-label>
          </ion-item>
        </ng-container>
   
      </ion-list>
      <div class="ion-padding" style="padding-bottom: 0"></div>
    </div>
  </ion-fab>
  <ion-grid fixed>
    <ion-row>
      <ion-col size="12">
        <!-- Thông tin cá nhân -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'personnel-profile'" style="min-width: 300px">
          
          <app-staff-personnel-profile [data]="item" [pageConfig]="pageConfig" *ngIf="pageConfig.showSpinner == false">
            
          </app-staff-personnel-profile>
          
        </div>
        <!-- Thông tin JOB -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'job-information'" style="min-width: 300px">
          <app-staff-job-information
         
          ></app-staff-job-information>
          <!-- <div class="main-view" *ngIf="pageConfig.showSpinner == false">
              <div class="row-full shadow full-screen ion-padding">
                <ion-grid fixed>
                  <ion-row
                    class="hr-group"
                    [class]="hideBorder ? '' : 'border'"
                    [ngStyle]="{ 'border-style': hideBorder ? 'none' : '' }"
                  >
                    <ion-col size="12" size-md="12" size-lg="12" size-xl="4"> </ion-col>
                    <ion-col size="12" size-md="12" size-lg="12" size-xl="6"></ion-col>
                  </ion-row>
                </ion-grid>
              </div>
            </div> -->
        </div>

        <!-- Lương -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'salary-benefits'" style="min-width: 300px">
          <app-staff-salary-benefits
          
          ></app-staff-salary-benefits>
        </div>

        <!-- Task -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'assigned-tasks'" style="min-width: 300px">
          <app-staff-assigned-tasks
           
          ></app-staff-assigned-tasks>
        </div>

        <!-- Awards -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'achievements-awards'" style="min-width: 300px">
          <app-staff-achievements-awards
          
          ></app-staff-achievements-awards>
        </div>

        <!-- Phạt -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'violate'" style="min-width: 300px">
          <app-staff-violate
          
          ></app-staff-violate>
        </div>

        <!-- Feedback -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'reviews-feedback'" style="min-width: 300px">
          <app-staff-reviews-feedback
        
          ></app-staff-reviews-feedback>
        </div>

        <!-- Hợp đồng nhân sự -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'contracts-documents'" style="min-width: 300px">
          <app-staff-contracts-documents
         
          ></app-staff-contracts-documents>
        </div>

        <!-- Lịch làm việc -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'work-schedule'" style="min-width: 300px">
          <app-staff-work-schedule
         
          ></app-staff-work-schedule>
        </div>

        <!-- Tài sản công ty -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'company-assets'" style="min-width: 300px">
          <app-staff-company-assets
         
          ></app-staff-company-assets>
        </div>

        <!-- Trạng thái nhân viên -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'employment-status'" style="min-width: 300px">
          <app-staff-employment-status
            
          ></app-staff-employment-status>
        </div>

        <!-- Dữ liệu hoạt động -->
        <div class="ion-padding" *ngIf="segmentView.Page == 'active-data'" style="min-width: 300px">
          <app-staff-active-data
           
          ></app-staff-active-data>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <app-page-message [itemsLength]="item? 1: 0" [showSpinner]="pageConfig.showSpinner"></app-page-message>
</ion-content>
